# ciudades.py
import math

# ------------------ 1. DEFINICIÓN DE DATOS ------------------

# CIUDADES con las coordenadas base
original_cities = {
    "Caracas": [1127.0, 286.0],
    "Puerto Ayacucho": [1050.0, 980.0],
    "Barcelona": [1452.0, 333.0],
    "San Fernando de Apure": [1043.0, 661.0],
    "Maracay": [1120.0, 493.0],
    "Barinas": [610.0, 550.0],
    "Ciudad Bolívar": [1645.0, 627.0],
    "Valencia": [895.0, 493.0],
    "San Carlos": [905.0, 405.0],
    "Tucupita": [1870.0, 480.0],
    "Coro": [700.0, 165.0],
    "San Juan de los Morros": [1092.0, 376.0],
    "Barquisimeto": [765.0, 340.70649848716266],
    "Mérida": [490.0, 567.0],
    "Los Teques": [1133.0, 314.0],
    "Maturín": [1693.0, 366.0],
    "La Asunción": [1581.0, 196.0],
    "Guanare": [691.0, 501.0],
    "Cumaná": [1541.0, 286.0],
    "San Cristóbal": [314.0596505135865, 712.2386020543461],
    "Trujillo": [560.0, 455.0],
    "La Guaira": [1165.0, 271.0],
    "San Felipe": [855.0, 299.0],
    "Maracaibo": [394, 271]
}

# WAYPOINTS (Puntos de ruta intermedios)
waypoints = {
    "wp_001": [349.9777101325837, 727.5426490237116],
    "wp_002": [400.4923519647134, 733.759835710743],
    "wp_003": [457.2241804838744, 753.188544107716],
    "wp_004": [521.7274923618247, 778.0572908558414],
    "wp_005": [582.3450625603804, 769.5086591611733],
    "wp_006": [646.8483744383306, 760.9600274665052],
    "wp_007": [682.5971978887608, 771.0629558329312],
    "wp_008": [726.8946530338592, 748.5256540924426],
    "wp_009": [756.426289797258, 735.3141323825009],
    "wp_010": [769.6378115071997, 713.5539789778911],
    "wp_011": [757.9805864690159, 671.5879688404295],
    "wp_012": [753.3176964537424, 639.724887069394],
    "wp_013": [724.5632080262224, 612.5246953136318],
    "wp_014": [686.4829395681554, 601.6446186113269],
    "wp_015": [667.0542311711824, 585.3245035578697],
    "wp_016": [630.5282593848733, 574.4444268555648],
    "wp_017": [614.9852926672949, 556.5700151303496],
    "wp_018": [561.3620574916495, 528.5926750387085],
    "wp_019": [561.3620574916495, 528.5926750387085],
    "wp_020": [528.721827384735, 534.032713389861],
    "wp_021": [505.4073773083674, 552.6842734509551],
    "wp_022": [482.09292723199985, 575.9987235273226],
    "wp_023": [451.784142132722, 596.2045802601745],
    "wp_024": [416.8124670181707, 601.6446186113269],
    "wp_025": [397.3837586211977, 614.8561403212685],
    "wp_026": [370.9607152013145, 621.0733270082999],
    "wp_027": [353.0863034760994, 628.0676620312101],
    "wp_028": [381.84079190361933, 654.4907054510934],
    "wp_029": [399.7152036288345, 677.8051555274609],
    "wp_030": [396.6066102853188, 713.5539789778911],
    "wp_031": [453.33843880447984, 705.005347283223],
    "wp_032": [498.41304228545715, 659.1535954663668],
    "wp_033": [531.8304207282506, 610.9703986418739],
    "wp_034": [590.8936942550484, 568.2272401685334],
    "wp_035": [566.024947506923, 581.438761878475],
    "wp_036": [523.6112912953294, 520.0649679024161],
    "wp_037": [545.448517262175, 496.3009278796723],
    "wp_038": [551.8712307818354, 468.04098839316623],
    "wp_039": [538.3835323905485, 509.1463549189933],
    "wp_040": [549.3021453739713, 518.7804251984841],
    "wp_041": [566.0012005250885, 500.7968273434347],
    "wp_042": [593.6188686596286, 489.2359430080458],
    "wp_043": [607.7488384028816, 472.53688785692856],
    "wp_044": [607.1065670509156, 472.53688785692856],
    "wp_045": [629.5860643697272, 459.6914608176076],
    "wp_046": [653.992375744437, 451.341933242049],
    "wp_047": [659.1305465601655, 475.10597326479274],
    "wp_048": [672.6182449514524, 489.87821436001184],
    "wp_049": [692.5286568623999, 500.7968273434347],
    "wp_050": [671.3337022475204, 518.138153846518],
    "wp_051": [643.7160341129803, 532.268123589771],
    "wp_052": [623.1633508500668, 543.1867365731938],
    "wp_053": [663.6264460239278, 556.0321636125149],
    "wp_054": [687.3904860466715, 576.5848468754283],
    "wp_055": [709.8699833654832, 598.422072842274],
    "wp_056": [741.9835509637857, 595.8529874344098],
    "wp_057": [759.3248774668689, 571.4466760596999],
    "wp_058": [771.5280331542239, 549.6094500928543],
    "wp_059": [751.6176212432764, 527.1299527740426],
    "wp_060": [727.2113098685666, 518.138153846518],
    "wp_061": [706.658626605653, 504.65045545523094],
    "wp_062": [710.5122547174493, 486.66685760018163],
    "wp_063": [723.3576817567703, 470.6100738010304],
    "wp_064": [739.4144655559214, 464.82963163333596],
    "wp_065": [768.3166763943937, 422.4397224035768],
    "wp_066": [750.9753498913103, 444.9192197223885],
    "wp_067": [774.097118562088, 401.24476778869723],
    "wp_068": [673.2605163034185, 422.4397224035768],
    "wp_069": [689.9595714545358, 391.6106975092065],
    "wp_070": [716.9349682371097, 376.19618506202136],
    "wp_071": [611.6024665146779, 452.6264759459811],
    "wp_072": [592.3343259556965, 439.7810489066601],
    "wp_073": [577.5620848604774, 434.0006067389657],
    "wp_074": [570.4970999888508, 446.84603377828665],
    "wp_075": [551.8712307818354, 431.4315213311015],
    "wp_076": [536.4567183346503, 427.5778932193052],
    "wp_077": [522.3267485913972, 450.05739053811686],
    "wp_078": [501.7740653284837, 472.53688785692856],
    "wp_079": [482.50592476950226, 493.0895711198421],
    "wp_080": [464.5223269144529, 509.78862627095936],
    "wp_081": [445.8964577074375, 524.5608673661784],
    "wp_082": [423.4169603886258, 537.4062944054995],
    "wp_083": [408.00244794144066, 558.601249020379],
    "wp_084": [400.93746306981416, 580.4384749872246],
    "wp_085": [399.010649013916, 593.9261733785116],
    "wp_086": [425.98604579649003, 590.7148166186814],
    "wp_087": [450.3923571711998, 583.6498317470549],
    "wp_088": [548.9230833732089, 414.724705486784],
    "wp_089": [565.1725485779499, 398.475240282043],
    "wp_090": [588.4869986543174, 387.17126448744057],
    "wp_091": [618.1599351151489, 387.17126448744057],
    "wp_092": [604.7364638590584, 408.36621910232014],
    "wp_093": [594.1389865516187, 422.49618884557316],
    "wp_094": [628.7574124225887, 367.38930684688626],
    "wp_095": [637.9418927557032, 349.0203461806573],
    "wp_096": [651.3653640117935, 338.4228688732175],
    "wp_097": [669.0278261908599, 334.1838779502416],
    "wp_098": [692.3422762672274, 334.89037643740426],
    "wp_099": [705.0592490361552, 348.31384769349467],
    "wp_100": [715.656726343595, 359.6178234880971],
    "wp_101": [727.6672006253599, 353.96583559079585],
    "wp_102": [744.6231643172637, 349.0203461806573],
    "wp_103": [759.4596325476793, 342.6618597961934],
    "wp_104": [759.4596325476793, 342.6618597961934],
    "wp_105": [770.7636083422817, 361.7373189495851],
    "wp_106": [777.8285932139083, 384.3452705387899],
    "wp_107": [780.6545871625589, 341.2488628218681],
    "wp_108": [798.3170493416252, 337.71637038605485],
    "wp_109": [827.9899858024567, 334.1838779502416],
    "wp_110": [850.5979373916615, 327.8253915657777],
    "wp_111": [879.5643753653303, 330.65138551442834],
    "wp_112": [906.4113178775111, 335.5968749245669],
    "wp_113": [932.5517619025293, 339.83586584754283],
    "wp_114": [957.2792089532221, 339.1293673603802],
    "wp_115": [741.0906718814504, 331.357884001591],
    "wp_116": [714.9502278564323, 327.8253915657777],
    "wp_117": [695.168270215878, 324.29289912996444],
    "wp_118": [676.799309549649, 318.64091123266326],
    "wp_119": [618.8664336023115, 352.5528386164706],
    "wp_120": [596.2584820131066, 349.0203461806573],
    "wp_121": [582.1285122698536, 347.607349206332],
    "wp_122": [558.814062193486, 345.487853744844],
    "wp_123": [541.1516000144197, 341.95536130903076],
    "wp_124": [534.7931136299559, 353.25933710363324],
    "wp_125": [518.5436484252148, 350.4333431549826],
    "wp_126": [496.6421953231726, 349.72684466781993],
    "wp_127": [488.16421347722076, 338.42286887321757],
    "wp_128": [471.2082497853171, 332.77088097591627],
    "wp_129": [450.0132951704375, 315.10841879684995],
    "wp_130": [445.7743042474616, 298.1524551049463],
    "wp_131": [440.12231635016036, 284.7289838488559],
    "wp_132": [421.0468571967687, 276.9575004900667],
    "wp_133": [440.828814837323, 265.6535246954643],
    "wp_134": [467.67575734950384, 262.8275307468137],
    "wp_135": [487.4577149900581, 249.40405949072326],
    "wp_136": [502.2941832204738, 238.80658218328347],
    "wp_137": [515.7176544765642, 230.32860033733164],
    "wp_138": [797.7099174780744, 711.7118052853536],
    "wp_139": [797.7099174780744, 711.7118052853536],
    "wp_140": [805.417173701667, 689.874579318508],
    "wp_141": [841.3843694117656, 680.2405090390173],
    "wp_142": [867.7174948423736, 666.1105392957643],
    "wp_143": [913.318760831963, 666.1105392957643],
    "wp_144": [961.4891122294166, 668.0373533516624],
    "wp_145": [935.7982581507747, 664.8259965918321],
    "wp_146": [980.1149814364319, 673.8177955193569],
    "wp_147": [996.1717652355832, 673.8177955193569],
    "wp_148": [1032.7812322976479, 662.256911183968],
    "wp_149": [1014.7976344425985, 668.0373533516624],
    "wp_150": [1037.9194031133761, 646.2001273848168],
    "wp_151": [1018.6512625543947, 598.0297759873632],
    "wp_152": [1024.4317047220893, 617.2979165463446],
    "wp_153": [1022.504890666191, 573.6234646126534],
    "wp_154": [1025.7162474260213, 547.2903391820455],
    "wp_155": [1028.9276041858516, 521.5994851034036],
    "wp_156": [1048.195744744833, 513.892228879811],
    "wp_157": [1047.5534733928669, 492.6972742649314],
    "wp_158": [890.1969921611853, 663.5414538879],
    "wp_159": [888.9124494572532, 646.2001273848168],
    "wp_160": [891.4815348651174, 623.078358714039],
    "wp_161": [895.3351629769137, 599.9565900432614],
    "wp_162": [903.0424192005063, 572.9811932606874],
    "wp_163": [901.1156051446081, 551.1439672938418],
    "wp_164": [902.4001478485402, 529.3067413269962],
    "wp_165": [906.2537759603365, 513.2499575278449],
    "wp_166": [938.3673435586388, 484.3477466893728],
    "wp_167": [924.2373738153858, 502.9736158963882],
    "wp_168": [934.5137154468425, 457.37234990679883],
    "wp_169": [932.5869013909444, 432.32376718012296],
    "wp_170": [932.5869013909444, 421.40515419670015],
    "wp_171": [903.0424192005063, 496.5509023767277],
    "wp_172": [889.5547208092192, 486.27456074527095],
    "wp_maracaibo_city": [394.0, 271.0]
}

# ------------------ 2. COMBINACIÓN (ORDEN CRÍTICO) ------------------
# Esto debe ir DESPUÉS de definir original_cities y waypoints
all_nodes = {**original_cities, **waypoints}

# ------------------ 3. FUNCIONES AUXILIARES ------------------
def distance(a, b): 
    # Calculamos la distancia en píxeles
    dist_pixeles = math.hypot(a[0] - b[0], a[1] - b[1])
    
    return dist_pixeles * 0.81

def distance_between_nodes(node1, node2):
    """Calcula la distancia entre dos nodos usando sus coordenadas reales"""
    if node1 in all_nodes and node2 in all_nodes:
        x1, y1 = all_nodes[node1]
        x2, y2 = all_nodes[node2]
        # Aquí ya llamará a la función distance con el multiplicador
        return distance((x1, y1), (x2, y2))
    return float('inf')